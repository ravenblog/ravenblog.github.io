<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>mysql执行计划分析</title>
    <link href="/2021/11/29/mysql%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%88%86%E6%9E%90/"/>
    <url>/2021/11/29/mysql%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<p>如何能使mysql以更高的性能执行查询语句?要回答这一问题我们首先需要弄清楚mysql内部是怎么执行查询语句的，只要知道了这一点，找出mysql在执行过程中的性能瓶颈，做针对性的优化就能使查询语句以预期合理的方式运行，真正做到高性能mysql。</p><h2 id="mysql执行计划分析"><a href="#mysql执行计划分析" class="headerlink" title="mysql执行计划分析"></a>mysql执行计划分析</h2><h3 id="mysql查询执行的基础"><a href="#mysql查询执行的基础" class="headerlink" title="mysql查询执行的基础"></a>mysql查询执行的基础</h3><p>如何能使mysql以更高的性能执行查询语句?要回答这一问题我们首先需要弄清楚mysql内部是怎么执行查询语句的，做到不仅到知其然而且知其所以然。只要知道了这一点，找出mysql在执行过程中的性能瓶颈，做针对性的优化就能使查询语句以预期合理的方式运行，真正做到高性能mysql。</p><p>下面流程阐述了执行一条查询语句的时候，mysql到底在内部进行了哪些操作。</p><ol><li>客户端发送一条查询给服务器</li><li>服务器先检查查询缓存，如果命中了缓存，则立刻返回存储在缓存中的结果。否则进入下一阶段。</li><li>服务器端进行sql解析、预处理，再由优化器生成对应的执行计划。</li><li>mysql根据优化器生成的执行计划，调用存储引擎的API来执行查询。</li><li>将结果返回给客户端</li></ol><p>从以上步骤可以看出查询优化工作实际上就是根据一些规则使得优化器能够以预期合理的方式运行</p><h3 id="mysql执行计划"><a href="#mysql执行计划" class="headerlink" title="mysql执行计划"></a>mysql执行计划</h3><p>由mysql查询执行的基础步骤可知，当客户端发送给mysql 服务器一条查询语句后，服务器端进行sql解析、预处理，再由优化器生成对应的执行计划。使用 EXPLAIN 关键字可以模拟优化器执行 SQL 查询语句，从而知道 MYSQL 是如何处理你的 sql 语句的。分析你的查询语句或是表结构的性能瓶颈。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">explainselect * from t1 <span class="hljs-built_in">where</span> content=<span class="hljs-string">&quot;test&quot;</span> order by idDESC <span class="hljs-built_in">limit</span> 1;<br></code></pre></td></tr></table></figure><table><thead><tr><th>id</th><th>select_type</th><th>table</th><th>partitions</th><th>type</th><th>possible_keys</th><th>key</th><th>key_len</th><th>ref</th><th>rows</th><th>filtered</th><th>Extra</th></tr></thead><tbody><tr><td>1</td><td>SIMPLE</td><td>t1</td><td></td><td>index</td><td></td><td>PRIMARY</td><td>4</td><td></td><td>1</td><td>100</td><td>Using where</td></tr></tbody></table><ol><li>id：select查询的序列号，包含一组数字，表示查询中执行select字句或操作表的顺序</li></ol><ul><li><p>id相同执行顺序由上至下</p><p>执行一下语句</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">explain select * from <span class="hljs-built_in">t1</span>,<span class="hljs-built_in">t2</span>,<span class="hljs-built_in">t3</span> where <span class="hljs-built_in">t1</span>.id=<span class="hljs-built_in">t2</span>.id <span class="hljs-keyword">and </span><span class="hljs-built_in">t2</span>.id=<span class="hljs-built_in">t3</span>.id<br></code></pre></td></tr></table></figure><table><thead><tr><th align="center">id</th><th align="center">select_type</th><th align="center">table</th><th>type</th><th align="center">possible_keys</th><th align="center">key</th><th>key_lean</th><th>ref</th><th>rows</th><th>filtered</th><th>Extra</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">SIMPLE</td><td align="center">t1</td><td>index</td><td align="center">PRIMARY</td><td align="center"></td><td></td><td></td><td>1</td><td>100</td><td></td></tr><tr><td align="center">1</td><td align="center">SIMPLE</td><td align="center">t2</td><td>eq_ref</td><td align="center">PRIMARY</td><td align="center">PRIMARY</td><td>2</td><td>test.t1.id</td><td>1</td><td>100</td><td></td></tr><tr><td align="center">1</td><td align="center">SIMPLE</td><td align="center">t3</td><td>eq_ref</td><td align="center">PRIMARY</td><td align="center">PRIMARY</td><td>4</td><td>test.t1.id</td><td>1</td><td>100</td><td></td></tr></tbody></table></li><li><p>id不同，如果是子查询，id的序号会递增，id越大优先级越高，越先被执行</p></li><li><p>id相同和不用的情况同时存在，id如果相同，可以认为是一组，从上往下顺序执行；在所有组中，id值越大，优先级越高，越先执行</p><p>select_type：查询的类型，主要用来区别普通查询、联合查询、子查询等复杂查询</p><p>table：显示这一张的数据是关于哪张表的</p><p>type：</p><p>possible_key:</p><p>key:</p><p>key_len:</p><p>ref:</p><p>row：rows列显示mysql认为它执行查询时必须检查的行数，越小越好</p><p>Extra:</p></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>浅析前缀索引及索引的选择性</title>
    <link href="/2021/11/29/%E6%B5%85%E6%9E%90%E5%89%8D%E7%BC%80%E7%B4%A2%E5%BC%95%E5%8F%8A%E7%B4%A2%E5%BC%95%E7%9A%84%E9%80%89%E6%8B%A9%E6%80%A7/"/>
    <url>/2021/11/29/%E6%B5%85%E6%9E%90%E5%89%8D%E7%BC%80%E7%B4%A2%E5%BC%95%E5%8F%8A%E7%B4%A2%E5%BC%95%E7%9A%84%E9%80%89%E6%8B%A9%E6%80%A7/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/10/17/hello-world/"/>
    <url>/2021/10/17/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
